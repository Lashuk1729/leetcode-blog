<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Construct Binary Tree from Preorder and Inorder Traversal - Two easy to understand recursive solutions | Leetcode Blog</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Construct Binary Tree from Preorder and Inorder Traversal - Two easy to understand recursive solutions" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Problem Statement: Given two integer arrays preorder and inorder where preorder is the preorder traversal of a binary tree and inorder is the inorder traversal of the same tree, construct and return the binary tree." />
<meta property="og:description" content="Problem Statement: Given two integer arrays preorder and inorder where preorder is the preorder traversal of a binary tree and inorder is the inorder traversal of the same tree, construct and return the binary tree." />
<link rel="canonical" href="http://localhost:4000/leetcode-solutions/2022/01/06/construct-binary-tree-from-preorder-and-inorder-traversal-two-easy-to-understand-recursive-solutions.html" />
<meta property="og:url" content="http://localhost:4000/leetcode-solutions/2022/01/06/construct-binary-tree-from-preorder-and-inorder-traversal-two-easy-to-understand-recursive-solutions.html" />
<meta property="og:site_name" content="Leetcode Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-01-06T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Construct Binary Tree from Preorder and Inorder Traversal - Two easy to understand recursive solutions" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-01-06T00:00:00+00:00","datePublished":"2022-01-06T00:00:00+00:00","description":"Problem Statement: Given two integer arrays preorder and inorder where preorder is the preorder traversal of a binary tree and inorder is the inorder traversal of the same tree, construct and return the binary tree.","headline":"Construct Binary Tree from Preorder and Inorder Traversal - Two easy to understand recursive solutions","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/leetcode-solutions/2022/01/06/construct-binary-tree-from-preorder-and-inorder-traversal-two-easy-to-understand-recursive-solutions.html"},"url":"http://localhost:4000/leetcode-solutions/2022/01/06/construct-binary-tree-from-preorder-and-inorder-traversal-two-easy-to-understand-recursive-solutions.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/leetcode-solutions/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/leetcode-solutions/feed.xml" title="Leetcode Blog" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/leetcode-solutions/">Leetcode Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/leetcode-solutions/about/">About</a><a class="page-link" href="/leetcode-solutions/tags/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Construct Binary Tree from Preorder and Inorder Traversal - Two easy to understand recursive solutions</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2022-01-06T00:00:00+00:00" itemprop="datePublished">Jan 6, 2022
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
      }
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><img src="/leetcode-solutions/tag-solid.svg" height="20"><a href="/leetcode-solutions/tag/Array">Array &nbsp;&nbsp;&nbsp; </a><img src="/leetcode-solutions/tag-solid.svg" height="20"><a href="/leetcode-solutions/tag/Binary Tree">Binary Tree &nbsp;&nbsp;&nbsp; </a><img src="/leetcode-solutions/tag-solid.svg" height="20"><a href="/leetcode-solutions/tag/C">C &nbsp;&nbsp;&nbsp; </a><img src="/leetcode-solutions/tag-solid.svg" height="20"><a href="/leetcode-solutions/tag/Divide and Conquer">Divide and Conquer &nbsp;&nbsp;&nbsp; </a><img src="/leetcode-solutions/tag-solid.svg" height="20"><a href="/leetcode-solutions/tag/Hash Table">Hash Table &nbsp;&nbsp;&nbsp; </a><img src="/leetcode-solutions/tag-solid.svg" height="20"><a href="/leetcode-solutions/tag/Medium">Medium &nbsp;&nbsp;&nbsp; </a><img src="/leetcode-solutions/tag-solid.svg" height="20"><a href="/leetcode-solutions/tag/Tree">Tree &nbsp;&nbsp;&nbsp; </a><br>
<br>
<h1 id="problem-statement">Problem Statement:</h1>
<p>Given two integer arrays <code>preorder</code> and <code>inorder</code> where <code>preorder</code> is the preorder traversal of a binary tree and <code>inorder</code> is the inorder traversal of the same tree, construct and return <em>the binary tree</em>.</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>
<p><img alt="" src="https://assets.leetcode.com/uploads/2021/02/19/tree.jpg" style="width: 277px; height: 302px;" /></p>
<pre>
<strong>Input:</strong> preorder = [3,9,20,15,7], inorder = [9,3,15,20,7]
<strong>Output:</strong> [3,9,20,null,null,15,7]
</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> preorder = [-1], inorder = [-1]
<strong>Output:</strong> [-1]
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= preorder.length &lt;= 3000</code></li>
	<li><code>inorder.length == preorder.length</code></li>
	<li><code>-3000 &lt;= preorder[i], inorder[i] &lt;= 3000</code></li>
	<li><code>preorder</code> and <code>inorder</code> consist of <strong>unique</strong> values.</li>
	<li>Each value of <code>inorder</code> also appears in <code>preorder</code>.</li>
	<li><code>preorder</code> is <strong>guaranteed</strong> to be the preorder traversal of the tree.</li>
	<li><code>inorder</code> is <strong>guaranteed</strong> to be the inorder traversal of the tree.</li>
</ul>

<h1 id="solution">Solution:</h1>
<h2 id="method-i">Method-I:</h2>
<ul>
  <li>We know the root is at <code class="language-plaintext highlighter-rouge">preorder[0]</code>. Find the index of this element in <code class="language-plaintext highlighter-rouge">inorder</code> array. Call this <code class="language-plaintext highlighter-rouge">rootIndex</code>.</li>
  <li>In the <code class="language-plaintext highlighter-rouge">inorder</code> array, everything to the left of this element is in the left subtree and everything to the right is in the right subtree ie <code class="language-plaintext highlighter-rouge">inorder[:rootIndex]</code> is the inorder traversal of left subtree and <code class="language-plaintext highlighter-rouge">inorder[rootIndex+1:]</code> is the inorder traversal of the right subtree</li>
  <li>Now we can know the size of the left subtree and the right subtree from the above arrays. So we use this to form the preorder traversals of left and right subtree ie <code class="language-plaintext highlighter-rouge">preorder[1:rootIndex+1]</code> is the preorder traversal of left subtree and <code class="language-plaintext highlighter-rouge">preorder[rootIndex+1:]</code> is the preorder traversal of the right subtree</li>
  <li>Recursively form the tree using the above 4 arrays as left and right.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Solution {
public:
    TreeNode* buildTree(vector&lt;int&gt;&amp; preorder, vector&lt;int&gt;&amp; inorder) {
        if (preorder.size()==0||inorder.size()==0) return NULL;

        int rootIndex=0;
        while(inorder[rootIndex]!=preorder[0])  rootIndex++;
        vector&lt;int&gt; pre_left(preorder.begin()+1, preorder.begin()+rootIndex+1);
        vector&lt;int&gt; pre_right(preorder.begin()+rootIndex+1, preorder.end());
        vector&lt;int&gt; in_left(inorder.begin(), inorder.begin()+rootIndex);
        vector&lt;int&gt; in_right(inorder.begin()+rootIndex+1, inorder.end());

        TreeNode *root = new TreeNode;
        root-&gt;val = preorder[0];
        root-&gt;left = buildTree(pre_left, in_left);
        root-&gt;right = buildTree(pre_right, in_right);
        return root;
    }
};
</code></pre></div></div>

<h2 id="method--ii">Method -II</h2>
<p>This is similar to the solution provided by Leetcode in java. I translated it in c++.</p>

<p>Basically we do the same method as method-I in a different manner.</p>

<ul>
  <li>Create a <code class="language-plaintext highlighter-rouge">HashMap&lt;int, int&gt;</code> and Keep indices of <code class="language-plaintext highlighter-rouge">inorder</code> array in the form <code class="language-plaintext highlighter-rouge">value: index</code>.</li>
  <li>Initialize <code class="language-plaintext highlighter-rouge">preOrderIndex</code> as 0.</li>
  <li>Both these variables are class variables so that these can be changed during the function calls.</li>
  <li>Now we know that root is present at <code class="language-plaintext highlighter-rouge">preorder[0]</code>. So create the node with this value. Note that since we have a <code class="language-plaintext highlighter-rouge">preOrderIndex</code> variable, we can increment it and get this value from preorder array.</li>
  <li>Use the index map created earlier to find the index of this element in the <code class="language-plaintext highlighter-rouge">inorder</code> array.</li>
  <li>We know that to the left of this in <code class="language-plaintext highlighter-rouge">inorder</code> is the left subtree and to the right is the right subtree. So recursively call with appropriate left and right limits of inorder array.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Solution {
    int preOrderIndex;
    unordered_map&lt;int,int&gt; inOrderIndexMap;
public:
    TreeNode *helper(vector&lt;int&gt;preorder, int left, int right)
    {
        if (left&gt;right) return NULL;
        int rootVal = preorder[preOrderIndex];
        preOrderIndex++;
        int inOrderIndex = inOrderIndexMap[rootVal];
        TreeNode *root = new TreeNode;
        root-&gt;val = rootVal;
        root-&gt;left = helper(preorder, left, inOrderIndex-1);
        root-&gt;right = helper(preorder, inOrderIndex+1, right);
        return root;
    }
    TreeNode* buildTree(vector&lt;int&gt;&amp; preorder, vector&lt;int&gt;&amp; inorder) {
        preOrderIndex=0;
        for(int i=0; i&lt;inorder.size(); i++) inOrderIndexMap[inorder[i]]=i;
        return helper(preorder, 0, preorder.size()-1);
    }
};
</code></pre></div></div>

<p>I  personally  think method-I is easier and is what I would come up with when asked this problem during an interview.</p>

  </div><a class="u-url" href="/leetcode-solutions/2022/01/06/construct-binary-tree-from-preorder-and-inorder-traversal-two-easy-to-understand-recursive-solutions.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/leetcode-solutions/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Leetcode Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Leetcode Blog</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/piyush01123"><svg class="svg-icon"><use xlink:href="/leetcode-solutions/assets/minima-social-icons.svg#github"></use></svg> <span class="username">piyush01123</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>A blog of all my leetcode discussion posts.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
